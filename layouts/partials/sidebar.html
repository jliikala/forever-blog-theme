<aside class="sidebar">
  <div class="sidebar-partial">
    {{ if templates.Exists "partials/microhook-sidebar-bio.html" }}
      {{ partial "microhook-sidebar-bio.html" . }}
    {{ else }}
      <img src="{{ .Site.Author.avatar }}" alt="{{ .Site.Title }} Profile Photo" class="profile-photo u-photo">
      {{ .Site.Params.itunes_description | safeHTML }}
    {{ end }}
  </div>
  <div class="sidebar-partial">
    {{ if templates.Exists "partials/microhook-sidebar-subscribe.html" }}
      {{ partial "microhook-sidebar-subscribe.html" . }}
    {{ else }}
      {{ if or .Site.Params.newsletterId .Params.has_newsletters }}
      <h3>Subscribe to email updates for this blog</h3>
      <form method="POST" action="https://micro.blog/users/subscribe/{{ .Site.Params.newsletterId }}">
        <input type="text" name="email" size="30" placeholder="Your email address" />
        <input type="submit" value="Subscribe" />
      </form>
      <p>You can also subscribe <a href="{{ .Site.RSSLink }}">via RSS feed</a>.</p>
      {{ else }}
        <span>Subscribe to this blog <a href="{{ .Site.RSSLink }}">via RSS feed</a>.</span>
      {{ end }}
    {{ end }}
  </div>
  <div class="sidebar-partial">
    {{ $list := ($.Site.GetPage "taxonomyTerm" "categories").Pages }}
    {{ if gt (len $list) 0 }}
    <div class="archive-categories">
      <h3>Categories</h3>
      <ul>
        {{ range $list }}
        {{ $categoryName := .Title }}
        {{ $postCount := len (where $.Site.RegularPages "Params.categories" "intersect" (slice $categoryName)) }}
        {{ if gt $postCount 0 }}
        <li>
          <a href="{{ .Permalink }}">{{ .Title }}</a>
          ({{ $postCount }})
        </li>
        {{ end }}
        {{ end }}
      </ul>
    </div>
    {{ end }}
  </div>
</aside>